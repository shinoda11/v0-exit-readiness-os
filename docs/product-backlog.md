# YOHACK プロダクトバックログ

## 現在地

Phase 1 プロダクト完了。マーケティング進行中。

### 実装済み機能
- モンテカルロシミュレーション（1,000回、100歳まで）
- 世界線比較（テンプレート5種、3本目追加導線）
- ライフイベント（9タイプ、パートナー対応、バンドルプリセット、賃貸収入）
- 住宅シミュレーション（CRN比較、変動金利ステップアップ、家賃インフレ分離）
- オンボーディングウィザード（3ステップ、4項目入力）
- 料金ページ（¥29,800/90日 Pass）

**テスト（120本）**
- engine.test.ts: エンジンコア（税率・年金・スコア計算）
- e2e-personas.test.ts: 18ケース（C01-C18）のE2E検証 + パートナー・賃貸収入
- housing-sim.test.ts: 住宅シミュレーション29本（賃貸/購入/住み替え/CRN再現性/エッジケース）
- adapter.test.ts: 余白計算アダプタ

## バックログ

### 優先度: 高（Phase 1 マーケティング）

| ID | タスク | 備考 | サイズ |
|----|--------|------|--------|
| M01 | **LP改修** — 7セクション、LP設計書に準拠 | 別リポ yohack-lp | 大 |
| M02 | **FitGate実装** — 12問・自動判定・結果表示 | /fit, /fit/result | 大 |
| M03 | **チラ見せ動画** — 15秒、ダッシュボード操作→スコア変動 | 撮影可能状態は確認済み | 小 |
| M04 | **Instagram初回投稿** — グリッド9枚 | アカウント設計完了後 | 中 |

### 優先度: 中（Phase 2-3）

| ID | タスク | 備考 | サイズ |
|----|--------|------|--------|
| P01 | **Supabase導入** — 認証 + DB + localStorage移行 | Phase 2 | 大 |
| P02 | **Stripe連携** — FitGate Ready → Checkout → アクセス権 | Phase 3 | 大 |
| P03 | **Pass期間管理** — 90日カウント、期限切れハンドリング | Phase 3 | 中 |
| P04 | **GA4イベント計測** — LP→FitGate→決済の導線 | Phase 3 | 小 |

### 優先度: 低（技術的負債・改善）

| ID | タスク | 備考 | サイズ |
|----|--------|------|--------|
| T01 | **middleware → proxy 移行** — Next.js 16 非推奨警告の解消 | ビルドに影響なし | 小 |
| T02 | **TypeScript 5.1+ アップグレード** — 最小推奨バージョン対応 | ビルドに影響なし | 小 |
| T03 | **テストカバレッジ** — housing-sim 29本あり。worldline-templates.ts のテストが未整備 | worldline-templates は119行、ロジックが軽いので優先度低 | 小 |
| T04 | **年金へのライフイベント反映** — パートナー収入変動→年金額 | engine.ts L242 周辺 | 中 |
| T05 | **metadataBase 設定** — OGP/Twitter Card 用 | layout.tsx | 小 |
